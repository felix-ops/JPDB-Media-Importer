<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>JPDB Media Importer</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 10px;
      width: 320px;
    }
    input, select, button, progress {
      width: 100%;
      margin: 5px 0;
      box-sizing: border-box;
      font-size: 14px;
    }
    #result {
      margin-top: 10px;
      word-break: break-all;
      max-height: 200px;
      overflow-y: auto;
      background: #f7f7f7;
      padding: 5px;
    }
  </style>
</head>
<body>
  <h2>JPDB Media Importer</h2>
  
  <label for="url">Anki Connect URL:</label>
  <input type="text" id="url" placeholder="http://localhost:8765" value="http://localhost:8765">
  
  <label for="deckSelect">Select Deck:</label>
  <select id="deckSelect">
    <option value="">-- Loading decks --</option>
  </select>
  
  <label for="contextFieldSelect">Context Field:</label>
  <select id="contextFieldSelect">
    <option value="">-- Select context field --</option>
  </select>
  
  <label for="imageFieldSelect">Image Field:</label>
  <select id="imageFieldSelect">
    <option value="">-- Select image field --</option>
  </select>
  
  <label for="audioFieldSelect">Audio Field:</label>
  <select id="audioFieldSelect">
    <option value="">-- Select audio field --</option>
  </select>
  
  <label for="jpdbApiKey">JPDB API Key:</label>
  <input type="text" id="jpdbApiKey" placeholder="Enter JPDB API Key" value="">
  
  <button id="fetchData">Fetch Data</button>
  
  <progress id="progressBar" value="0" max="100" style="width: 100%; display:none;"></progress>
  
  <div id="result"></div>

  <!-- Export Button -->
<button id="saveConfigButton">Save Config</button>

<!-- Import Button -->
<button id="loadConfigButton">Load Config</button>
<!-- Hidden file input for loading config -->
<input type="file" id="configFileInput" accept="application/json" style="display:none;">
  
  <script src="popup.js"></script>
</body>
</html>
